<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="utf-8">
    <title>pi API</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
</head>
<body>
    <h1>pi API</h1>
    <script language="javascript">
        request = new XMLHttpRequest();
        console.log("1 - request object created");

        // Step 2: Set the URL for the AJAX request to be the JSON file

        request.open("GET", "https://api.pi.delivery/v1/pi", true)

        console.log("2 - opened request file");

        // Step 3: set up event handler/callback

        request.onreadystatechange = function() {
            console.log("3 - readystatechange event fired.");

            if (request.readyState == 4 && request.status == 200) {

                // Step 5: wait for done + success
                console.log("5 - response received");
                result = request.responseText;
                alert(result);
                weather = JSON.parse(result);

                document.getElementById("data").innerHTML ="current temp in boston: " + weather["current"]["temp"];

            }
            else if (request.readyState == 4 && request.status != 200) {

                document.getElementById("data").innerHTML = "Something is wrong!  Check the logs to see where this went off the rails";

            }

            else if (request.readyState == 3) {

                document.getElementById("data").innerHTML = "Too soon!  Try again";

            }

        }
        // Step 4: fire off the HTTP request
        var data = {
            "start": "1",
            "numberOfDigits": "100"
        }
        request.send(JSON.stringify(data))
        console.log("4 - Request sent");
    </script>

    <div id="data">Loading...</div>
</body>
</html>
